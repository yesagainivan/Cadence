Error
failed to stream completion
error during streamGenerateContent, status code: 429, body: {
  "error": {
    "code": 429,
    "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.",
    "status": "RESOURCE_EXHAUSTED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.QuotaFailure",
        "violations": [
          {
            "quotaMetric": "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count",
            "quotaId": "GenerateContentInputTokensPerModelPerMinute-FreeTier",
            "quotaDimensions": {
              "location": "global",
              "model": "gemini-2.0-flash"
            },
            "quotaValue": "1000000"
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Learn more about Gemini API quotas",
            "url": "https://ai.google.dev/gemini-api/docs/rate-limits"
          }
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.RetryInfo",
        "retryDelay": "10s"
      }
    ]
  }
}


///


// No struct NoteFrequency {} is needed, as the frequencies can be derived or stored in a const array.

// Base frequency for C4 (pitch class 0, often considered middle C)
const C4_FREQ: f32 = 261.63;

// A constant array storing the frequencies for each pitch class (0-11)
// assuming they are in the 4th octave (e.g., C4, C#4, D4, etc.).
// This approach is more efficient and robust than a HashMap with string keys,
// as it directly maps to the `Note`'s `pitch_class` and avoids dynamic allocations
// and string comparisons. It also inherently handles enharmonic equivalents (e.g., C# and Db)
// having the same frequency without redundant entries.
// The `powf` function is not a const fn, so these values must be pre-calculated.
const BASE_OCTAVE_FREQUENCIES: [f32; 12] = [
    261.63, // Pitch Class 0 (C4)
    277.18, // Pitch Class 1 (C#4/Db4)
    293.66, // Pitch Class 2 (D4)
    311.13, // Pitch Class 3 (D#4/Eb4)
    329.63, // Pitch Class 4 (E4)
    349.23, // Pitch Class 5 (F4)
    369.99, // Pitch Class 6 (F#4/Gb4)
    392.00, // Pitch Class 7 (G4)
    415.30, // Pitch Class 8 (G#4/Ab4)
    440.00, // Pitch Class 9 (A4)
    466.16, // Pitch Class 10 (A#4/Bb4)
    493.88, // Pitch Class 11 (B4)
];

/// Returns the frequency (in Hz) for a given pitch class, assuming it's in the 4th octave.
/// This function can be used to get the base frequency for a `Note` object.
///
/// # Arguments
/// * `pitch_class` - The chromatic pitch class (0-11) of the note.
///
/// # Returns
/// An `Option<f32>` containing the frequency if the pitch class is valid (0-11),
/// otherwise `None`.
pub fn get_base_frequency_for_pitch_class(pitch_class: u8) -> Option<f32> {
    if pitch_class < 12 {
        Some(BASE_OCTAVE_FREQUENCIES[pitch_class as usize])
    } else {
        None // Should not happen with valid Note pitch_class (0-11)
    }
}
